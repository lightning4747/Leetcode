# 122. Best Time to Buy and Sell Stock II

## Problem Summary

You are given an array `prices`, where `prices[i]` is the stock price on day `i`.

Rules:

* You can buy and sell multiple times.
* You can hold **at most one stock at any time**.
* You can buy and sell on the **same day** (effectively instant transactions).

Goal: **Maximize total profit**.

---

## Key Insight (This Is Where People Overthink)

This problem is **not** about finding one perfect buy-sell pair.

It’s about **capturing every upward price movement**.

If the price goes up from day `i` to day `i+1`, you take that profit. Period.

Why this works:

* Multiple small profits add up to the same profit as one big transaction.
* Selling before a dip and rebuying lower never hurts.

This leads directly to a **greedy strategy**.

---

## Greedy Strategy

### Rule

For every consecutive pair of days:

* If `prices[i+1] > prices[i]`, take the profit:

```
profit += prices[i+1] - prices[i]
```

That’s it.

No tracking minimums.
No complex state machines.
No DP tables.

---

## Java Implementation

```java
class Solution {
    public int maxProfit(int[] nums) {
        int max = 0;
        int n = nums.length;

        for (int i = 0; i < n - 1; i++) {
            if (nums[i] < nums[i + 1]) {
                max += nums[i + 1] - nums[i];
            }
        }
        return max;
    }
}
```

---

## Algorithm Flow (Step-by-Step Example)

### Example 1

```
prices = [7, 1, 5, 3, 6, 4]
```

| Day   | Price | Action | Profit |
| ----- | ----- | ------ | ------ |
| 1 → 2 | 7 → 1 | Down ❌ | 0      |
| 2 → 3 | 1 → 5 | Up ✅   | +4     |
| 3 → 4 | 5 → 3 | Down ❌ | +0     |
| 4 → 5 | 3 → 6 | Up ✅   | +3     |
| 5 → 6 | 6 → 4 | Down ❌ | +0     |

**Total Profit = 4 + 3 = 7**

Interpretation:

* Buy at 1 → sell at 5
* Buy at 3 → sell at 6

Same result as problem explanation, achieved automatically.

---

### Example 2

```
prices = [1, 2, 3, 4, 5]
```

Daily gains:

* 1 → 2 = +1
* 2 → 3 = +1
* 3 → 4 = +1
* 4 → 5 = +1

Total = **4**

This is equivalent to buying once at 1 and selling at 5.
Greedy doesn’t miss anything.

---

### Example 3

```
prices = [7, 6, 4, 3, 1]
```

Every day goes down.
No upward movement.

**Profit = 0**

---

## Why Greedy Works (Intuition)

Think of the price chart as hills:

* You want to climb **every upward slope**.
* You don’t care where the peak is.

Mathematically:

```
(a → b) + (b → c) = (a → c)
```

So taking profits in chunks or all at once is the same.

---

## Time & Space Complexity

* **Time:** `O(n)` — single pass
* **Space:** `O(1)` — no extra memory

---

## Common Mistakes

* Trying to track a minimum price (that’s for Stock I, not II)
* Using DP unnecessarily
* Overcomplicating buy/sell states

This problem rewards simplicity. If your solution feels clever, it’s probably wrong.

---

## Final Takeaway

This is a pure greedy problem.

If the price goes up tomorrow, take the money today.
No hesitation. No ego. Just math.

Stock II is a reminder that sometimes the optimal strategy is embarrassingly straightforward.
