# 496. Next Greater Element I — Full Flow + Code (Stack Approach)

## Example Input

nums1 = [4, 1, 2]  
nums2 = [1, 3, 4, 2]

Goal:
For each element in nums1, find the first greater element to its right in nums2.

---

## Why nums2 Is Processed First

nums1 only asks questions.  
nums2 contains all answers.

We precompute the next greater element for **every value in nums2** once,
store it in a map, then answer nums1 in O(1).

---

## Data Structures

- Stack<Integer> → stores numbers waiting for a greater element
- HashMap<Integer, Integer> → value → next greater value

Stack invariant:
Elements in the stack are in **decreasing order (top is smallest)**.

---

## Step-by-Step Stack Flow (nums2)

### Initial State

Stack: []  
Map: {}

---

### Read `1`

Stack empty → push

Stack: [1]  
Map: {}

---

### Read `3`

3 > 1  
→ Pop 1  
→ next greater of 1 is 3

Map: {1 → 3}  
Push 3

Stack: [3]

---

### Read `4`

4 > 3  
→ Pop 3  
→ next greater of 3 is 4

Map: {1 → 3, 3 → 4}  
Push 4

Stack: [4]

---

### Read `2`

2 < 4  
No pop. Push.

Stack: [4, 2]  
Map: {1 → 3, 3 → 4}

---

## End of nums2

Remaining stack elements have **no greater element to the right**.

Pop and assign -1:

- Pop 2 → map[2] = -1
- Pop 4 → map[4] = -1

Final Map:
{
  1 → 3,
  3 → 4,
  2 → -1,
  4 → -1
}

---

## Answer nums1 Using the Map

nums1 = [4, 1, 2]

- 4 → -1
- 1 → 3
- 2 → -1

Final Output:
[-1, 3, -1]

---

## Java Solution (Stack + HashMap)

```java
import java.util.*;

class Solution {
    public int[] nextGreaterElement(int[] nums1, int[] nums2) {
        Map<Integer, Integer> nextGreater = new HashMap<>();
        Stack<Integer> stack = new Stack<>();

        // Build next greater mapping for nums2
        for (int num : nums2) {
            while (!stack.isEmpty() && num > stack.peek()) {
                nextGreater.put(stack.pop(), num);
            }
            stack.push(num);
        }

        // Elements left in stack have no next greater
        while (!stack.isEmpty()) {
            nextGreater.put(stack.pop(), -1);
        }

        // Build answer for nums1
        int[] ans = new int[nums1.length];
        for (int i = 0; i < nums1.length; i++) {
            ans[i] = nextGreater.get(nums1[i]);
        }

        return ans;
    }
}
